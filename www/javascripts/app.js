(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};$(function(){var c,b;if(!navigator.geolocation){alert("fuck")}c=(function(){var d;d=["Nom on some #{ this.Title }, buddy!","Put some #{ this.Title } in your face.","Fucking #{ this.Title }, bro."];function e(){this.draw=a(this.draw,this);this.setupClient=a(this.setupClient,this);this.getLocation=a(this.getLocation,this);this.text=$("#text");this.getLocation()}e.prototype.getLocation=function(){this.text.text("Finding your location...");console.log("getLocation");return navigator.geolocation.getCurrentPosition(a(function(g){var f;f=[g.coords.latitude,g.coords.longitude],this.lat=f[0],this.lng=f[1];console.log(this.lat,this.lng);return this.setupClient()},this))};e.prototype.selectRandom=function(f){return f[Math.floor(Math.random(f.total)*f.length)]};e.prototype.template=function(g,f){return function(i,h){return g.replace(/#{([^}]*)}/g,function(j,k){return Function("x","with(x)return "+k).call(i,h||f||{})})}};e.prototype.setupClient=function(){var f;this.text.text("Finding a place to eat...");console.log("setupClient");window.callbackHandler=f=function(i,g){var h,j;console.log(i,g);return b.draw(i!=null?(h=i.query)!=null?(j=h.results)!=null?j.Result:void 0:void 0:void 0)};return this.search()};e.prototype.search=function(){return $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20local.search%20where%20latitude%3D'"+this.lat+"'%20and%20longitude%3D'"+this.lng+"'%20and%20query%3D'restaurant'&format=json&diagnostics=true",callbackHandler)};e.prototype.headline=function(g){var f;f=this.template(this.selectRandom(d));console.log(f,g);return b.text.text(f(g))};e.prototype.draw=function(g){var f;f=this.selectRandom(g);return this.headline(f)};return e})();return b=new c})}).call(this);
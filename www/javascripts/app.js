(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};$(function(){var c,b;if(!navigator.geolocation){alert("bro you need geolocation")}c=(function(){var d;d=["Nom on some #{ this.Title }, buddy!","Break bread at #{ this.Title }, pal.","Chow down at #{ this.Title }, champ!","Put away some #{ this.Title }, killer!","Cram some #{ this.Title } in your face.","Demolish some #{ this.Title }, bro.","Gobble up some #{ this.Title }, turkey."];function e(){this.draw=a(this.draw,this);this.getLocation=a(this.getLocation,this);this.text=$("#text");this.infoBox=$("#infoBox");this.getLocation()}e.prototype.getLocation=function(){this.text.text("Finding your location...");return navigator.geolocation.getCurrentPosition(a(function(g){var f;f=[g.coords.latitude,g.coords.longitude],this.lat=f[0],this.lng=f[1];return this.setupClient()},this))};e.prototype.selectRandom=function(f){return f[Math.floor(Math.random(f.total)*f.length)]};e.prototype.template=function(g,f){return function(i,h){return g.replace(/#{([^}]*)}/g,function(j,k){return Function("x","with(x)return "+k).call(i,h||f||{})})}};e.prototype.callbackHandler=function(h,f){var g,i;return b.draw(h!=null?(g=h.query)!=null?(i=g.results)!=null?i.Result:void 0:void 0:void 0)};e.prototype.setupClient=function(){return setTimeout(a(function(){this.text.html(this.text.text()+"<br/>Finding a place to eat...");window.callbackHandler=this.callbackHandler;return this.search()},this),1000)};e.prototype.search=function(){return $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20local.search%20where%20latitude%3D'"+this.lat+"'%20and%20longitude%3D'"+this.lng+"'%20and%20query%3D'restaurant'&format=json&diagnostics=true",callbackHandler)};e.prototype.info=function(g){var f;f=this.template(($("#info")).text());return b.infoBox.html(f(g))};e.prototype.headline=function(g){var f;f=this.template(this.selectRandom(d));b.text.text(f(g));return this.info(g)};e.prototype.draw=function(g){var f;f=this.selectRandom(g);return this.headline(f)};return e})();return b=new c})}).call(this);